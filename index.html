<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pencarian Data</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    .center { text-align: center; margin-top: 15%; }
    .search-box { width: 400px; padding: 10px; font-size: 16px; }
    .btn { padding: 8px 16px; margin: 10px; font-size: 14px; cursor:pointer; }
    .results { max-width: 700px; margin: 20px auto; }
    .result-item { margin-bottom: 20px; }
    .result-item a { font-size: 18px; color:#1a0dab; text-decoration:none; }
    .result-item a:hover { text-decoration:underline; }
    .result-link { font-size:14px; color:#006621; }
    .result-desc { font-size:14px; color:#545454; }
    .pagination { text-align:center; margin:20px 0; }
    .pagination button { margin:0 5px; padding:5px 10px; cursor:pointer; }
  </style>
</head>
<body>
  <!-- Halaman awal -->
  <div id="homePage" class="center">
    <h1 style="font-size:48px; color:#4285F4;">Cari Data</h1>
    <input type="text" id="searchBoxHome" class="search-box" placeholder="Masukkan kata kunci..." 
           onkeydown="if(event.key==='Enter'){searchFromHome();}">
    <br>
    <button class="btn" onclick="searchFromHome()">Cari</button>
  </div>

  <!-- Halaman hasil -->
  <div id="resultsPage" style="display:none; padding:20px;">
    <div style="text-align:center;">
      <input type="text" id="searchBoxResults" class="search-box" 
             onkeydown="if(event.key==='Enter'){searchFromResults();}">
      <button class="btn" onclick="searchFromResults()">Cari</button>
    </div>
    <div id="results" class="results"></div>
    <div id="pagination" class="pagination"></div>
  </div>

<script>
let classes = [];
let currentPage = 1;
const itemsPerPage = 10;

// Ambil data dari Spreadsheet (CSV)
fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSTVuikIS8TrWotcD8HoURvr8THTt7wM5E3aoxbxHgL_Al6uILAbEK7rXiBfLdckO96gZVWuRGIUrY_/pub?gid=0&single=true&output=csv")
  .then(res => res.text())
  .then(text => {
      const rows = text.split("\n").map(r => r.split(","));
      // Kolom: Nama file | Link file | Deskripsi
      classes = rows.slice(1).map(r => ({
          name: r[0]?.trim(),
          link: r[1]?.trim(),
          desc: r[2]?.trim()
      }));
  });

// Fungsi pencarian
function showResults(query, page = 1) {
    document.getElementById('homePage').style.display = 'none';
    document.getElementById('resultsPage').style.display = 'block';
    document.getElementById('searchBoxResults').value = query;
    currentPage = page;

    const results = classes.filter(c => c.name && c.name.toLowerCase().includes(query.toLowerCase()));
    const container = document.getElementById('results');
    container.innerHTML = '';

    const start = (page - 1) * itemsPerPage;
    const paginatedResults = results.slice(start, start + itemsPerPage);

    paginatedResults.forEach(c => {
        const div = document.createElement('div');
        div.className = 'result-item';
        if (c.link) {
            div.innerHTML = `<a href="${c.link}" target="_blank">${c.name}</a><br>
                             <span class="result-link">${c.link}</span><br>
                             <span class="result-desc">${c.desc || ""}</span>`;
        } else {
            div.innerHTML = `<strong>${c.name}</strong><br>
                             <span class="result-desc">${c.desc || ""}</span>`;
        }
        container.appendChild(div);
    });

    renderPagination(results.length, query);
}

// Pagination
function renderPagination(total, query) {
    const totalPages = Math.ceil(total / itemsPerPage);
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = '';
    for (let i=1; i<=totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        if (i===currentPage) btn.style.fontWeight = 'bold';
        btn.onclick = () => showResults(query, i);
        pagination.appendChild(btn);
    }
}

// Fungsi helper
function searchFromHome() {
    const q = document.getElementById('searchBoxHome').value;
    if (q.trim()!=="") showResults(q);
}
function searchFromResults() {
    const q = document.getElementById('searchBoxResults').value;
    if (q.trim()!=="") showResults(q);
}
</script>
</body>
</html>
